---
import Layout from '@/layouts/Layout.astro'
import { getCollection } from 'astro:content'

import PostCard from '@/components/blog/PostCard.astro'
import LatestPosts from '@/components/blog/LatestPosts.astro'
import { formatDate } from '@/utils/blog'

const allPosts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())

const featured = allPosts.slice(0, 6)
const latest = allPosts.slice(0, 4)

const heroCTA = [
  { label: 'Anza Kujifunza', href: '/blog', variant: 'primary' },
  { label: 'DSE', href: '/dse', variant: 'outline' },
  { label: 'Mutual Funds', href: '/mutual-funds', variant: 'outline' }
]
---

<Layout
  title='UwekezajiTZ'
  description='Mwongozo wa Uwekezaji wa Hisa na Mifuko ya Uwekezaji Tanzania'
  type='website'
>
  <section class='bg-gradient-to-b from-primary/5 via-background to-background pt-10 pb-16 sm:pt-16 sm:pb-24'>
    <div class='mx-auto flex max-w-6xl flex-col gap-8 px-4 sm:px-6 lg:px-8'>
      <div class='space-y-6 text-center'>
        <p class='text-sm font-semibold text-primary'>Mwongozo wa uwekezaji Tanzania</p>
        <h1 class='text-4xl font-bold leading-tight text-foreground sm:text-5xl'>
          UwekezajiTZ
        </h1>
        <p class='mx-auto max-w-3xl text-lg text-muted-foreground'>
          Mwongozo wa uwekezaji wa hisa (DSE), mutual funds, hati fungani na elimu ya fedha kwa Kiswahili. Tunakupa
          hatua za vitendo, uchambuzi rahisi, na rasilimali za kuanza bila mkanganyiko.
        </p>
        <div class='flex flex-wrap items-center justify-center gap-3'>
          {heroCTA.map(item => (
            <a
              href={item.href}
              class={`rounded-full px-5 py-2 text-sm font-semibold transition ${
                item.variant === 'primary'
                  ? 'bg-primary text-primary-foreground hover:bg-primary/90'
                  : 'border border-primary/30 text-primary hover:bg-primary/10'
              }`}
            >
              {item.label}
            </a>
          ))}
        </div>
        <p class='text-xs uppercase tracking-wide text-muted-foreground'>Muda wa Afrika Mashariki (Africa/Dar_es_Salaam)</p>
      </div>

      <div class='grid gap-6 lg:grid-cols-[2fr,1fr]'>
        <div class='grid gap-4 sm:grid-cols-2'>
          {featured.slice(0, 4).map(post => (
            <PostCard post={post} />
          ))}
        </div>
        <div class='rounded-xl border border-border bg-card/50 p-5 shadow-sm'>
          <h3 class='text-lg font-semibold text-foreground'>Muhtasari wa haraka</h3>
          <ul class='mt-4 space-y-3 text-sm text-muted-foreground'>
            <li>Bei na taarifa za DSE kwa wanaoanza</li>
            <li>Jinsi ya kuchagua mutual fund ya kwanza (UTT, benki)</li>
            <li>Hatari, mseto, na nidhamu ya bajeti ya uwekezaji</li>
            <li>Glossary ya maneno muhimu kwa Kiswahili</li>
          </ul>
          <div class='mt-4 text-sm'>
            <span class='font-semibold text-foreground'>Makala mpya:</span>
            <ul class='mt-2 space-y-1'>
              {latest.map(post => (
                <li>
                  <a class='text-primary hover:underline' href={`/blog/${post.slug}`}>
                    {post.data.title}
                  </a>
                  <span class='text-muted-foreground'> Â· {formatDate(post.data.pubDate)}</span>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class='py-12 sm:py-16'>
    <div class='mx-auto max-w-6xl space-y-8 px-4 sm:px-6 lg:px-8'>
      <div class='flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between'>
        <div>
          <p class='text-sm font-semibold text-primary'>Makala zilizochaguliwa</p>
          <h2 class='text-2xl font-bold text-foreground sm:text-3xl'>Elimu ya uwekezaji kwa Kiswahili</h2>
          <p class='text-muted-foreground'>Chagua mada unayopendelea na anza mara moja.</p>
        </div>
        <a class='text-primary hover:underline font-medium' href='/blog'>Tazama blog nzima</a>
      </div>
      <div class='grid gap-6 md:grid-cols-2 lg:grid-cols-3'>
        {featured.map(post => (
          <PostCard post={post} />
        ))}
      </div>
    </div>
  </section>

  <section class='bg-muted/50 py-12 sm:py-16'>
    <div class='mx-auto max-w-6xl space-y-8 px-4 sm:px-6 lg:px-8'>
      <div class='space-y-2 text-center'>
        <p class='text-sm font-semibold text-primary'>Mada kuu</p>
        <h2 class='text-2xl font-bold text-foreground sm:text-3xl'>Chagua eneo la kuanzia</h2>
      </div>
      <div class='grid gap-4 sm:grid-cols-2 md:grid-cols-4'>
        {[
          { title: 'DSE', desc: 'Kununua na kuuza hisa, kuhesabu gawio, kufuatilia taarifa.', href: '/dse' },
          { title: 'Mutual Funds', desc: 'UTT, NMB na wengine; NAV, ada, na malengo.', href: '/mutual-funds' },
          { title: 'Hati fungani', desc: 'Serikali na kampuni; riba, muda wa ukomo na hatari.', href: '/tags/Hati%20fungani' },
          { title: 'Mwongozo wa wanaoanza', desc: 'Hatua kwa hatua, mipango ya bajeti na hatari.', href: '/blog' }
        ].map(card => (
          <a
            href={card.href}
            class='flex h-full flex-col gap-3 rounded-xl border border-border bg-background p-4 shadow-sm transition hover:-translate-y-1 hover:shadow-md'
          >
            <h3 class='text-lg font-semibold text-foreground'>{card.title}</h3>
            <p class='text-sm text-muted-foreground'>{card.desc}</p>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class='py-12 sm:py-16'>
    <div class='mx-auto max-w-6xl px-4 sm:px-6 lg:px-8'>
      <div class='rounded-xl border border-amber-200/60 bg-amber-50 px-6 py-6 text-amber-900 shadow-sm dark:border-amber-500/30 dark:bg-amber-900/20 dark:text-amber-100'>
        <h3 class='text-lg font-semibold'>Kanusho (Disclaimer)</h3>
        <p class='mt-2 text-sm leading-relaxed'>
          Taarifa hizi si ushauri wa kifedha, kisheria, au ushuru. Fanya utafiti wako, wasiliana na mshauri aliyeidhinishwa
          kabla ya kufanya maamuzi ya uwekezaji. Soko la hisa na hati fungani linaweza kupanda na kushuka.
        </p>
      </div>
    </div>
  </section>

  <section class='bg-muted/40 py-12 sm:py-16'>
    <div class='mx-auto max-w-6xl px-4 sm:px-6 lg:px-8'>
      <LatestPosts posts={latest} />
    </div>
  </section>
</Layout>
